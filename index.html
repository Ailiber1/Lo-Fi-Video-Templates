<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lo-Fi Video Templates - Free Lo-Fi Video Backgrounds</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,400;1,500&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ======================================================
       „Éá„Ç∂„Ç§„É≥„Éà„Éº„ÇØ„É≥ÔºàCSSÂ§âÊï∞Ôºâ
       ====================================================== */
    :root {
      /* ËÉåÊôØËâ≤ - „Ç¶„Ç©„Éº„É†„Éà„Éº„É≥ */
      --bg-main: #F5F0E8;
      --bg-card: #FFFFFF;
      --bg-header: transparent;

      /* „ÉÜ„Ç≠„Çπ„ÉàËâ≤ */
      --text-primary: #2D2D2D;
      --text-secondary: #6B6B6B;
      --text-light: #FFFFFF;

      /* „Ç¢„ÇØ„Çª„É≥„ÉàËâ≤ - „Ç≥„ÉÉ„Éë„Éº/„Éñ„É≠„É≥„Ç∫Á≥ª */
      --accent-copper: #C4846C;
      --accent-copper-hover: #B07560;
      --accent-warm: #D4A574;

      /* Ê§úÁ¥¢„Éê„Éº - „Ç∞„É©„Çπ„É¢„Éº„Éï„Ç£„Ç∫„É† */
      --glass-bg: rgba(255, 255, 255, 0.25);
      --glass-border: rgba(255, 255, 255, 0.35);
      --glass-shadow: rgba(0, 0, 0, 0.1);

      /* „Ç∏„É£„É≥„É´„Éú„Çø„É≥ */
      --genre-btn-bg: #FFFFFF;
      --genre-btn-border: #E8E0D5;
      --genre-btn-text: #555555;
      --genre-btn-active-bg: #2D2D2D;
      --genre-btn-active-text: #FFFFFF;

      /* „Éï„Ç©„É≥„Éà */
      --font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI",
                     "Hiragino Sans", "Noto Sans JP", sans-serif;
      --font-display: 'Playfair Display', serif;

      /* Ëßí‰∏∏ */
      --radius-card: 12px;
      --radius-button: 24px;
      --radius-search: 50px;
      --radius-tag: 12px;
      --radius-badge: 6px;

      /* „É¨„Ç§„Ç¢„Ç¶„Éà */
      --grid-gap: 20px;
      --content-max-width: 1400px;
      --section-padding: 24px;

      /* „Éê„ÉÉ„Ç∏Ëâ≤ */
      --badge-popular-bg: #E85D5D;
      --badge-new-bg: #5DAD5D;

      /* „Ç∏„É£„É≥„É´ÈÖçËâ≤ */
      --genre-rain: #6B8FAD;
      --genre-fire: #C07040;
      --genre-anime: #8B6BAD;
      --genre-study: #7AAD6B;
      --genre-night: #4A5580;
      --genre-chill: #AD8B6B;
    }

    /* ======================================================
       „ÉÄ„Éº„ÇØ„É¢„Éº„Éâ
       ====================================================== */
    [data-theme="dark"] {
      --bg-main: #1a1a2e;
      --bg-card: #25253d;
      --text-primary: #e8e8f0;
      --text-secondary: #9999b8;
      --accent-copper: #D4A574;
      --accent-copper-hover: #E0B584;
      --glass-bg: rgba(37, 37, 61, 0.7);
      --glass-border: rgba(123, 140, 222, 0.3);
      --genre-btn-bg: #25253d;
      --genre-btn-border: #3d3d5c;
      --genre-btn-text: #b8b8d0;
      --genre-btn-active-bg: #7b8cde;
      --genre-btn-active-text: #1a1a2e;
    }

    /* ======================================================
       „É™„Çª„ÉÉ„Éà„Éª„Éô„Éº„Çπ„Çπ„Çø„Ç§„É´
       ====================================================== */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body {
      font-family: var(--font-family);
      background-color: var(--bg-main);
      color: var(--text-primary);
      line-height: 1.5;
      min-height: 100vh;
    }

    /* ======================================================
       „Éò„ÉÉ„ÉÄ„ÉºÔºà„Éí„Éº„É≠„Éº‰∏ä„Å´Èáç„Å≠„ÇãÔºâ
       ====================================================== */
    .header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      padding: 20px 40px;
    }

    .header-inner {
      max-width: var(--content-max-width);
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: var(--text-light);
    }

    .logo-icon {
      font-size: 24px;
    }

    .logo-text {
      font-size: 20px;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .header-nav {
      display: flex;
      align-items: center;
      gap: 32px;
    }

    .nav-link {
      color: var(--text-light);
      text-decoration: none;
      font-size: 15px;
      font-weight: 500;
      opacity: 0.9;
      transition: opacity 0.2s;
    }

    .nav-link:hover {
      opacity: 1;
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .theme-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 18px;
    }

    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.25);
    }

    .theme-toggle .icon-dark { display: none; }
    [data-theme="dark"] .theme-toggle .icon-light { display: none; }
    [data-theme="dark"] .theme-toggle .icon-dark { display: inline; }

    .lang-toggle {
      display: flex;
      gap: 4px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: var(--radius-button);
      padding: 4px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .lang-btn {
      padding: 6px 12px;
      border: none;
      background: transparent;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.8);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .lang-btn:hover {
      color: #fff;
    }

    .lang-btn.active {
      background: rgba(255, 255, 255, 0.9);
      color: #2D2D2D;
    }

    /* ======================================================
       „Éí„Éº„É≠„Éº„Çª„ÇØ„Ç∑„Éß„É≥
       ====================================================== */
    .hero-section {
      position: relative;
      height: 70vh;
      min-height: 500px;
      max-height: 800px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .hero-video-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .hero-video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0.3) 0%,
        rgba(0, 0, 0, 0.2) 50%,
        rgba(0, 0, 0, 0.4) 100%
      );
      z-index: 2;
    }

    .hero-content {
      position: relative;
      z-index: 3;
      text-align: center;
      padding: 0 20px;
      width: 100%;
      max-width: 700px;
    }

    .hero-title {
      font-family: var(--font-display);
      font-size: 72px;
      font-weight: 400;
      font-style: italic;
      color: var(--text-light);
      margin-bottom: 40px;
      text-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
    }

    /* ======================================================
       „Ç∞„É©„Çπ„É¢„Éº„Éï„Ç£„Ç∫„É†Ê§úÁ¥¢„Éê„Éº
       ====================================================== */
    .search-box {
      display: flex;
      align-items: center;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-search);
      padding: 8px 8px 8px 24px;
      box-shadow: 0 8px 32px var(--glass-shadow);
    }

    .search-icon {
      color: rgba(255, 255, 255, 0.7);
      font-size: 20px;
      margin-right: 12px;
    }

    .search-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      font-size: 16px;
      font-family: var(--font-family);
      color: var(--text-light);
      min-width: 200px;
    }

    .search-input::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }

    .search-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
      background: var(--accent-copper);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
      color: white;
      font-size: 20px;
    }

    .search-btn:hover {
      background: var(--accent-copper-hover);
      transform: scale(1.05);
    }

    /* „Çπ„É©„Ç§„ÉÄ„Éº„Éâ„ÉÉ„ÉàÔºàË£ÖÈ£æÁî®Ôºâ */
    .hero-dots {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 30px;
    }

    .hero-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      cursor: pointer;
      transition: background 0.2s;
    }

    .hero-dot.active {
      background: rgba(255, 255, 255, 0.9);
    }

    /* ======================================================
       „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ
       ====================================================== */
    .main-content {
      padding: 40px var(--section-padding);
      max-width: var(--content-max-width);
      margin: 0 auto;
    }

    /* „Çª„ÇØ„Ç∑„Éß„É≥„Éò„ÉÉ„ÉÄ„Éº */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--text-primary);
    }

    /* „Ç∏„É£„É≥„É´„Éï„Ç£„É´„Çø„Éº */
    .genre-filter {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .genre-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 10px 18px;
      font-size: 14px;
      font-weight: 500;
      font-family: var(--font-family);
      background-color: var(--genre-btn-bg);
      border: 1px solid var(--genre-btn-border);
      border-radius: var(--radius-button);
      color: var(--genre-btn-text);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .genre-btn:hover {
      border-color: var(--text-secondary);
    }

    .genre-btn.active {
      background-color: var(--genre-btn-active-bg);
      border-color: var(--genre-btn-active-bg);
      color: var(--genre-btn-active-text);
    }

    .genre-btn .emoji {
      font-size: 16px;
    }

    /* ======================================================
       „Ç´„Éº„Éâ„Ç∞„É™„ÉÉ„Éâ
       ====================================================== */
    .cards-area {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--grid-gap);
    }

    .empty-message {
      grid-column: 1 / -1;
      text-align: center;
      padding: 60px 20px;
      color: var(--text-secondary);
      font-size: 15px;
    }

    .loading-state {
      grid-column: 1 / -1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 20px;
      gap: 16px;
    }

    .loading-spinner {
      width: 36px;
      height: 36px;
      border: 3px solid var(--genre-btn-border);
      border-top-color: var(--accent-copper);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ======================================================
       „Éë„ÉÉ„Ç±„Éº„Ç∏„Ç´„Éº„Éâ - „Ç∑„É≥„Éó„É´„Çπ„Çø„Ç§„É´
       ====================================================== */
    .package-card {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .package-card:hover {
      transform: scale(1.02);
    }

    .card-thumbnail {
      position: relative;
      width: 100%;
      padding-top: 56.25%; /* 16:9 „Ç¢„Çπ„Éö„ÇØ„ÉàÊØî */
      overflow: hidden;
      background: #2a2a2a;
      border-radius: 16px;
    }

    .card-thumbnail img,
    .card-thumbnail video,
    .card-thumbnail iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      border: none;
      border-radius: 16px;
    }

    /* ÂÜçÁîü„Éú„Çø„É≥ - Â∑¶‰∏ã„Å´ÈÖçÁΩÆ */
    .play-overlay {
      position: absolute;
      bottom: 12px;
      left: 12px;
      width: auto;
      height: auto;
      background: transparent;
      opacity: 1;
      transition: opacity 0.3s ease;
    }

    .play-icon {
      width: 36px;
      height: 36px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #333;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      transition: transform 0.2s ease;
    }

    .package-card:hover .play-icon {
      transform: scale(1.1);
    }

    .card-placeholder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      border-radius: 16px;
    }

    /* „Ç∏„É£„É≥„É´Âà•„Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºÈÖçËâ≤ */
    .card-placeholder[data-genre="rain"] {
      background: linear-gradient(135deg, #6B8FAD 0%, #8BAFC8 100%);
    }
    .card-placeholder[data-genre="fire"] {
      background: linear-gradient(135deg, #C07040 0%, #D49060 100%);
    }
    .card-placeholder[data-genre="anime"] {
      background: linear-gradient(135deg, #8B6BAD 0%, #A88BC8 100%);
    }
    .card-placeholder[data-genre="study"] {
      background: linear-gradient(135deg, #7AAD6B 0%, #98C88B 100%);
    }
    .card-placeholder[data-genre="night"] {
      background: linear-gradient(135deg, #4A5580 0%, #6A75A0 100%);
    }
    .card-placeholder[data-genre="chill"] {
      background: linear-gradient(135deg, #AD8B6B 0%, #C8A88B 100%);
    }

    /* „Éê„ÉÉ„Ç∏ - ÈùûË°®Á§∫Ôºà„Ç∑„É≥„Éó„É´„Éá„Ç∂„Ç§„É≥Ôºâ */
    .card-badge {
      display: none;
    }

    /* „Ç´„Éº„ÉâÊú¨Êñá - „Ç≥„É≥„Éë„ÇØ„Éà */
    .card-body {
      padding: 12px 4px;
    }

    .card-title {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
      margin-bottom: 4px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .card-info {
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 0;
    }

    /* „Çø„Ç∞„Å®„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Éú„Çø„É≥„ÅØÈùûË°®Á§∫Ôºà„Ç∑„É≥„Éó„É´„Éá„Ç∂„Ç§„É≥Ôºâ */
    .card-tags {
      display: none;
    }

    .card-download-btn {
      display: none;
    }

    /* ======================================================
       „É¢„Éº„ÉÄ„É´
       ====================================================== */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      padding: 20px;
      overflow-y: auto;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--bg-card);
      border-radius: var(--radius-card);
      max-width: 900px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }

    .modal-overlay.active .modal-content {
      transform: scale(1);
    }

    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 40px;
      height: 40px;
      background: rgba(0, 0, 0, 0.6);
      border: none;
      border-radius: 50%;
      color: #fff;
      font-size: 24px;
      cursor: pointer;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-video {
      position: relative;
      width: 100%;
      padding-top: 56.25%;
      background: #000;
      border-radius: var(--radius-card) var(--radius-card) 0 0;
      overflow: hidden;
    }

    .modal-video iframe,
    .modal-video video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }

    .modal-video .modal-placeholder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 80px;
    }

    .modal-body {
      padding: 24px;
    }

    .modal-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 12px;
    }

    .modal-info {
      font-size: 15px;
      color: var(--text-secondary);
      margin-bottom: 16px;
    }

    .modal-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }

    .modal-download-btn {
      width: 100%;
      padding: 16px 24px;
      background-color: var(--accent-copper);
      border: none;
      border-radius: var(--radius-button);
      font-size: 16px;
      font-weight: 600;
      font-family: var(--font-family);
      color: #FFFFFF;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .modal-download-btn:hover {
      background-color: var(--accent-copper-hover);
    }

    /* ======================================================
       „É¨„Çπ„Éù„É≥„Ç∑„Éñ
       ====================================================== */
    @media (max-width: 1199px) {
      .cards-area {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 899px) {
      .cards-area {
        grid-template-columns: repeat(2, 1fr);
      }

      .hero-title {
        font-size: 56px;
      }

      .header-nav {
        display: none;
      }
    }

    @media (max-width: 600px) {
      .cards-area {
        grid-template-columns: 1fr;
      }

      .hero-section {
        height: 60vh;
        min-height: 400px;
      }

      .hero-title {
        font-size: 42px;
        margin-bottom: 24px;
      }

      .search-box {
        padding: 6px 6px 6px 16px;
      }

      .search-input {
        font-size: 14px;
        min-width: 150px;
      }

      .search-btn {
        width: 44px;
        height: 44px;
      }

      .header {
        padding: 16px 20px;
      }

      .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
      }

      .genre-filter {
        width: 100%;
        overflow-x: auto;
        flex-wrap: nowrap;
        padding-bottom: 8px;
      }

      .genre-btn {
        flex-shrink: 0;
      }
    }

    @media (max-width: 479px) {
      .hero-title {
        font-size: 36px;
      }

      .logo-text {
        font-size: 16px;
      }

      .main-content {
        padding: 24px 16px;
      }
    }
  </style>
</head>
<body>
  <!-- „Éò„ÉÉ„ÉÄ„ÉºÔºà„Éí„Éº„É≠„Éº‰∏ä„Å´Èáç„Å™„ÇãÔºâ -->
  <header class="header">
    <div class="header-inner">
      <a href="#" class="logo">
        <span class="logo-icon">üéµ</span>
        <span class="logo-text">Lo-Fi Templates</span>
      </a>

      <nav class="header-nav">
        <a href="#" class="nav-link" data-i18n="nav.home">„Éõ„Éº„É†</a>
        <a href="#packages" class="nav-link" data-i18n="nav.packages">„Éë„ÉÉ„Ç±„Éº„Ç∏</a>
        <a href="#" class="nav-link" data-i18n="nav.about">Ê¶ÇË¶Å</a>
      </nav>

      <div class="header-controls">
        <button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
          <span class="icon-light">‚òÄÔ∏è</span>
          <span class="icon-dark">üåô</span>
        </button>
        <div class="lang-toggle">
          <button type="button" class="lang-btn active" data-lang="ja">JA</button>
          <button type="button" class="lang-btn" data-lang="en">EN</button>
        </div>
      </div>
    </div>
  </header>

  <!-- „Éí„Éº„É≠„Éº„Çª„ÇØ„Ç∑„Éß„É≥ -->
  <section class="hero-section">
    <div class="hero-video-container">
      <video class="hero-video" autoplay muted loop playsinline>
        <source src="fireplace-loop.mp4" type="video/mp4">
      </video>
    </div>
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1 class="hero-title">Search</h1>
      <div class="search-box">
        <span class="search-icon">üîç</span>
        <input
          type="text"
          class="search-input"
          id="search-input"
          placeholder="„Ç≠„Éº„ÉØ„Éº„Éâ„ÅßÊ§úÁ¥¢"
          data-i18n-placeholder="searchPlaceholder"
        >
        <button type="button" class="search-btn" aria-label="Search">
          üîç
        </button>
      </div>
      <div class="hero-dots">
        <span class="hero-dot active"></span>
        <span class="hero-dot"></span>
        <span class="hero-dot"></span>
        <span class="hero-dot"></span>
      </div>
    </div>
  </section>

  <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
  <main class="main-content" id="packages">
    <!-- „Çª„ÇØ„Ç∑„Éß„É≥„Éò„ÉÉ„ÉÄ„Éº -->
    <div class="section-header">
      <h2 class="section-title" data-i18n="sectionTitle">Lo-Fi „Éë„ÉÉ„Ç±„Éº„Ç∏</h2>
      <div class="genre-filter" id="genre-filter">
        <button type="button" class="genre-btn" data-genre="rain">
          <span class="emoji">üåßÔ∏è</span>
          <span data-i18n="genres.rain">Èõ®</span>
        </button>
        <button type="button" class="genre-btn" data-genre="fire">
          <span class="emoji">üî•</span>
          <span data-i18n="genres.fire">ÁÅ´</span>
        </button>
        <button type="button" class="genre-btn" data-genre="anime">
          <span class="emoji">üé¨</span>
          <span data-i18n="genres.anime">„Ç¢„Éã„É°</span>
        </button>
        <button type="button" class="genre-btn" data-genre="study">
          <span class="emoji">üìö</span>
          <span data-i18n="genres.study">ÂãâÂº∑</span>
        </button>
        <button type="button" class="genre-btn" data-genre="night">
          <span class="emoji">üåô</span>
          <span data-i18n="genres.night">Â§ú</span>
        </button>
        <button type="button" class="genre-btn" data-genre="chill">
          <span class="emoji">‚òï</span>
          <span data-i18n="genres.chill">„ÉÅ„É´</span>
        </button>
      </div>
    </div>

    <!-- „Ç´„Éº„Éâ„Ç∞„É™„ÉÉ„Éâ -->
    <section class="cards-area" id="cards-container">
      <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÊèèÁîª -->
    </section>
  </main>

  <!-- „É¢„Éº„ÉÄ„É´ -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal-content">
      <button type="button" class="modal-close" id="modal-close">&times;</button>
      <div class="modal-video" id="modal-video"></div>
      <div class="modal-body">
        <h2 class="modal-title" id="modal-title"></h2>
        <div class="modal-info" id="modal-info"></div>
        <div class="modal-tags" id="modal-tags"></div>
        <button type="button" class="modal-download-btn" id="modal-download-btn">
          „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
        </button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script type="module">
    // Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
    import { getFirestore, collection, getDocs, query, orderBy }
      from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";
    import { getStorage, ref, getDownloadURL }
      from "https://www.gstatic.com/firebasejs/10.14.1/firebase-storage.js";

    // FirebaseË®≠ÂÆö
    const FIREBASE_CONFIG = {
      apiKey: "",
      authDomain: "",
      projectId: "",
      storageBucket: "",
      messagingSenderId: "",
      appId: ""
    };

    let db = null;
    let storage = null;

    // „Ç∏„É£„É≥„É´ÁµµÊñáÂ≠ó
    const GENRE_EMOJI = {
      rain: 'üåßÔ∏è',
      fire: 'üî•',
      anime: 'üé¨',
      study: 'üìö',
      night: 'üåô',
      chill: '‚òï'
    };

    // i18nËæûÊõ∏
    const I18N = {
      ja: {
        searchPlaceholder: '„Ç≠„Éº„ÉØ„Éº„Éâ„ÅßÊ§úÁ¥¢',
        sectionTitle: 'Lo-Fi „Éë„ÉÉ„Ç±„Éº„Ç∏',
        nav: { home: '„Éõ„Éº„É†', packages: '„Éë„ÉÉ„Ç±„Éº„Ç∏', about: 'Ê¶ÇË¶Å' },
        genres: { rain: 'Èõ®', fire: 'ÁÅ´', anime: '„Ç¢„Éã„É°', study: 'ÂãâÂº∑', night: 'Â§ú', chill: '„ÉÅ„É´' },
        badge: { popular: '‰∫∫Ê∞ó', new: 'Êñ∞‰Ωú' },
        downloadBtn: '„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ',
        emptyMessage: 'Ë©≤ÂΩì„Åô„Çã„Éë„ÉÉ„Ç±„Éº„Ç∏„Åå„ÅÇ„Çä„Åæ„Åõ„Çì',
        loading: 'Ë™≠„ÅøËæº„Åø‰∏≠...',
        duration: 'ÂàÜ',
        comingSoon: 'Ê∫ñÂÇô‰∏≠„Åß„Åô„ÄÇ„ÇÇ„ÅÜ„Åó„Å∞„Çâ„Åè„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ„ÄÇ'
      },
      en: {
        searchPlaceholder: 'Search by keyword',
        sectionTitle: 'Lo-Fi Packages',
        nav: { home: 'Home', packages: 'Packages', about: 'About' },
        genres: { rain: 'Rain', fire: 'Fire', anime: 'Anime', study: 'Study', night: 'Night', chill: 'Chill' },
        badge: { popular: 'Popular', new: 'New' },
        downloadBtn: 'Download',
        emptyMessage: 'No packages found',
        loading: 'Loading...',
        duration: 'min',
        comingSoon: 'Coming soon. Please wait.'
      }
    };

    // „É≠„Éº„Ç´„É´„Éá„Éº„Çø
    const LOCAL_PACKAGES = [
      {
        id: 'rain-lofi-work',
        title_ja: 'Èõ®Èü≥√óLo-Fi ‰ΩúÊ•≠Áî®',
        title_en: 'Rain √ó Lo-Fi Work',
        genres: ['rain', 'study'],
        durationMinutes: 60,
        size: '1.2GB',
        badge: 'popular',
        order: 1
      },
      {
        id: 'fire-lofi-healing',
        title_ja: 'ÁÑö„ÅçÁÅ´√óLo-Fi Áôí„ÅóÁ≥ª',
        title_en: 'Bonfire √ó Lo-Fi Healing',
        genres: ['fire', 'chill'],
        durationMinutes: 60,
        size: '1.27GB',
        badge: 'new',
        youtubeId: 'TKbyXrcEpuQ',
        downloadUrl: 'https://drive.google.com/uc?export=download&confirm=t&id=1Bd4ZEjZEHPeUt0TLCSpmMedo1wTaU6KA',
        order: 2
      },
      {
        id: 'night-city-lofi',
        title_ja: 'Â§ú„ÅÆË°ó√óLo-Fi Êï£Ê≠©Áî®',
        title_en: 'Night City √ó Lo-Fi Walk',
        genres: ['night', 'anime'],
        durationMinutes: 60,
        size: '1.5GB',
        badge: 'popular',
        order: 3
      },
      {
        id: 'cafe-lofi-reading',
        title_ja: '„Ç´„Éï„Çß√óLo-Fi Ë™≠Êõ∏Áî®',
        title_en: 'Caf√© √ó Lo-Fi Reading',
        genres: ['rain', 'study'],
        durationMinutes: 60,
        size: '1.1GB',
        badge: 'new',
        order: 4
      },
      {
        id: 'sakura-lofi-spring',
        title_ja: 'Ê°ú√óLo-Fi Êò•„ÅÆ‰ΩúÊ•≠Áî®',
        title_en: 'Sakura √ó Lo-Fi Spring',
        genres: ['chill', 'study'],
        durationMinutes: 60,
        size: '1.3GB',
        badge: 'popular',
        order: 5
      },
      {
        id: 'forest-lofi-nature',
        title_ja: 'Ê£ÆÊûó√óLo-Fi Ëá™ÁÑ∂Èü≥',
        title_en: 'Forest √ó Lo-Fi Nature',
        genres: ['rain', 'chill'],
        durationMinutes: 60,
        size: '1.0GB',
        badge: 'new',
        order: 6
      },
      {
        id: 'ocean-lofi-waves',
        title_ja: 'Êµ∑√óLo-Fi Ê≥¢„ÅÆÈü≥',
        title_en: 'Ocean √ó Lo-Fi Waves',
        genres: ['chill', 'night'],
        durationMinutes: 60,
        size: '1.4GB',
        badge: 'popular',
        order: 7
      },
      {
        id: 'bedroom-lofi-sleep',
        title_ja: '„Éô„ÉÉ„Éâ„É´„Éº„É†√óLo-Fi Áù°Áú†Áî®',
        title_en: 'Bedroom √ó Lo-Fi Sleep',
        genres: ['night', 'chill'],
        durationMinutes: 60,
        size: '1.1GB',
        badge: 'new',
        order: 8
      }
    ];

    // Áä∂ÊÖã
    const state = {
      packages: [],
      filteredPackages: [],
      selectedGenres: [],
      searchQuery: '',
      currentLang: 'ja',
      currentTheme: 'light',
      isLoading: false
    };

    // Firebase
    function isFirebaseConfigured() {
      return FIREBASE_CONFIG.apiKey && FIREBASE_CONFIG.projectId;
    }

    function initializeFirebase() {
      if (!isFirebaseConfigured()) return false;
      try {
        const app = initializeApp(FIREBASE_CONFIG);
        db = getFirestore(app);
        storage = getStorage(app);
        return true;
      } catch (e) {
        return false;
      }
    }

    async function loadPackages() {
      if (isFirebaseConfigured() && db) {
        try {
          const snapshot = await getDocs(query(collection(db, 'packages'), orderBy('order')));
          if (!snapshot.empty) {
            return snapshot.docs.map(doc => doc.data()).filter(pkg => pkg.visible !== false);
          }
        } catch (e) {}
      }
      return LOCAL_PACKAGES;
    }

    async function resolveThumbnail(pkg) {
      if (pkg.thumbnailPath && isFirebaseConfigured() && storage) {
        try {
          return await getDownloadURL(ref(storage, pkg.thumbnailPath));
        } catch (e) {}
      }
      return null;
    }

    async function resolvePreview(pkg) {
      if (pkg.previewUrl) return pkg.previewUrl;
      if (pkg.previewPath && isFirebaseConfigured() && storage) {
        try {
          return await getDownloadURL(ref(storage, pkg.previewPath));
        } catch (e) {}
      }
      return null;
    }

    async function handleDownload(pkgId) {
      const pkg = state.packages.find(p => p.id === pkgId);
      if (!pkg) return;

      if (pkg.downloadUrl) {
        const a = document.createElement('a');
        a.href = pkg.downloadUrl;
        a.target = '_blank';
        a.click();
        return;
      }

      if (pkg.downloadPath && isFirebaseConfigured() && storage) {
        try {
          const url = await getDownloadURL(ref(storage, pkg.downloadPath));
          const a = document.createElement('a');
          a.href = url;
          a.click();
          return;
        } catch (e) {}
      }

      alert(t('comingSoon'));
    }

    // DOM
    const cardsContainer = document.getElementById('cards-container');
    const searchInput = document.getElementById('search-input');
    const genreFilter = document.getElementById('genre-filter');
    const genreButtons = genreFilter.querySelectorAll('.genre-btn');
    const langButtons = document.querySelectorAll('.lang-btn');
    const themeToggle = document.getElementById('theme-toggle');
    const modalOverlay = document.getElementById('modal-overlay');
    const modalClose = document.getElementById('modal-close');
    const modalVideo = document.getElementById('modal-video');
    const modalTitle = document.getElementById('modal-title');
    const modalInfo = document.getElementById('modal-info');
    const modalTags = document.getElementById('modal-tags');
    const modalDownloadBtn = document.getElementById('modal-download-btn');

    // i18n
    function t(key) {
      const keys = key.split('.');
      let value = I18N[state.currentLang];
      for (const k of keys) value = value?.[k];
      return value || key;
    }

    function setLanguage(lang) {
      if (lang === state.currentLang) return;
      state.currentLang = lang;
      document.documentElement.lang = lang;
      langButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.lang === lang));
      applyLanguageToUI();
      renderCards(state.filteredPackages);
    }

    function applyLanguageToUI() {
      searchInput.placeholder = t('searchPlaceholder');
      document.querySelector('[data-i18n="sectionTitle"]').textContent = t('sectionTitle');
      document.querySelectorAll('[data-i18n^="nav."]').forEach(el => {
        const key = el.dataset.i18n;
        el.textContent = t(key);
      });
      genreButtons.forEach(btn => {
        const genre = btn.dataset.genre;
        const labelSpan = btn.querySelector('[data-i18n]');
        if (labelSpan) labelSpan.textContent = t(`genres.${genre}`);
      });
    }

    // „ÉÜ„Éº„Éû
    function setTheme(theme) {
      if (theme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
      } else {
        document.documentElement.removeAttribute('data-theme');
      }
      localStorage.setItem('theme', theme);
      state.currentTheme = theme;
    }

    function toggleTheme() {
      setTheme(state.currentTheme === 'dark' ? 'light' : 'dark');
    }

    function loadSavedTheme() {
      const saved = localStorage.getItem('theme');
      if (saved) { setTheme(saved); return; }
      if (window.matchMedia?.('(prefers-color-scheme: dark)').matches) { setTheme('dark'); return; }
      setTheme('light');
    }

    // „É¢„Éº„ÉÄ„É´
    let currentModalPkgId = null;

    function openModal(pkgId) {
      const pkg = state.packages.find(p => p.id === pkgId);
      if (!pkg) return;
      currentModalPkgId = pkgId;

      const title = state.currentLang === 'ja' ? pkg.title_ja : pkg.title_en;
      modalTitle.textContent = title;
      modalInfo.textContent = `‚è± ${pkg.durationMinutes || 60}${t('duration')} üíæ ${pkg.size || '1.0GB'}`;
      modalTags.innerHTML = pkg.genres.map(g => `<span class="modal-tag card-tag" data-genre="${g}">${t(`genres.${g}`)}</span>`).join('');
      modalDownloadBtn.textContent = t('downloadBtn');

      const primaryGenre = pkg.genres[0] || 'chill';
      const emoji = GENRE_EMOJI[primaryGenre] || 'üéµ';

      if (pkg.youtubeId) {
        modalVideo.innerHTML = `<iframe src="https://www.youtube.com/embed/${pkg.youtubeId}?rel=0&modestbranding=1&autoplay=1" title="${title}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
      } else if (pkg.resolvedPreviewUrl) {
        modalVideo.innerHTML = `<video controls autoplay loop><source src="${pkg.resolvedPreviewUrl}" type="video/mp4"></video>`;
      } else {
        modalVideo.innerHTML = `<div class="modal-placeholder card-placeholder" data-genre="${primaryGenre}">${emoji}</div>`;
      }

      modalOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      modalOverlay.classList.remove('active');
      document.body.style.overflow = '';
      currentModalPkgId = null;
      modalVideo.innerHTML = '';
    }

    // „Éï„Ç£„É´„Çø„Éº
    function applyFilters() {
      let filtered = [...state.packages];
      if (state.selectedGenres.length > 0) {
        filtered = filtered.filter(pkg => state.selectedGenres.every(g => pkg.genres.includes(g)));
      }
      if (state.searchQuery.trim()) {
        const q = state.searchQuery.toLowerCase().trim();
        filtered = filtered.filter(pkg => pkg.title_ja.toLowerCase().includes(q) || pkg.title_en.toLowerCase().includes(q));
      }
      state.filteredPackages = filtered;
      renderCards(state.filteredPackages);
    }

    function toggleGenre(genre) {
      const idx = state.selectedGenres.indexOf(genre);
      if (idx === -1) state.selectedGenres.push(genre);
      else state.selectedGenres.splice(idx, 1);
      updateGenreButtonStates();
      applyFilters();
    }

    function updateGenreButtonStates() {
      genreButtons.forEach(btn => btn.classList.toggle('active', state.selectedGenres.includes(btn.dataset.genre)));
    }

    // „Ç§„Éô„É≥„Éà
    function setupEventListeners() {
      searchInput.addEventListener('input', e => { state.searchQuery = e.target.value; applyFilters(); });
      genreButtons.forEach(btn => btn.addEventListener('click', () => toggleGenre(btn.dataset.genre)));
      langButtons.forEach(btn => btn.addEventListener('click', () => setLanguage(btn.dataset.lang)));
      themeToggle.addEventListener('click', toggleTheme);
      modalClose.addEventListener('click', closeModal);
      modalOverlay.addEventListener('click', e => { if (e.target === modalOverlay) closeModal(); });
      document.addEventListener('keydown', e => { if (e.key === 'Escape' && modalOverlay.classList.contains('active')) closeModal(); });
      modalDownloadBtn.addEventListener('click', () => { if (currentModalPkgId) handleDownload(currentModalPkgId); });
    }

    // ÊèèÁîª
    function showLoading() {
      cardsContainer.innerHTML = `<div class="loading-state"><div class="loading-spinner"></div><div>${t('loading')}</div></div>`;
    }

    function renderCards(packages) {
      cardsContainer.innerHTML = '';
      if (packages.length === 0) {
        cardsContainer.innerHTML = `<div class="empty-message">${t('emptyMessage')}</div>`;
        return;
      }
      packages.forEach(pkg => cardsContainer.appendChild(createCardElement(pkg)));
    }

    function createCardElement(pkg) {
      const card = document.createElement('article');
      card.className = 'package-card';
      card.dataset.id = pkg.id;

      const title = state.currentLang === 'ja' ? pkg.title_ja : pkg.title_en;
      const primaryGenre = pkg.genres[0] || 'chill';
      const emoji = GENRE_EMOJI[primaryGenre] || 'üéµ';

      let thumbnailHtml;
      let hasVideo = false;
      const playIconHtml = `<div class="play-overlay"><div class="play-icon">‚ñ∂</div></div>`;

      if (pkg.youtubeId) {
        // YouTube„Çµ„É†„Éç„Ç§„É´„Çí‰ΩøÁî®ÔºàÂüã„ÇÅËæº„Åø„Åß„ÅØ„Å™„ÅèÁîªÂÉèÔºâ
        thumbnailHtml = `<img src="https://img.youtube.com/vi/${pkg.youtubeId}/maxresdefault.jpg" alt="${title}" loading="lazy">${playIconHtml}`;
      } else if (pkg.resolvedPreviewUrl) {
        hasVideo = true;
        thumbnailHtml = `<video muted loop playsinline preload="metadata"><source src="${pkg.resolvedPreviewUrl}" type="video/mp4"></video>${playIconHtml}`;
      } else if (pkg.resolvedThumbnailUrl) {
        thumbnailHtml = `<img src="${pkg.resolvedThumbnailUrl}" alt="${title}" loading="lazy">${playIconHtml}`;
      } else {
        thumbnailHtml = `<div class="card-placeholder" data-genre="${primaryGenre}">${emoji}</div>${playIconHtml}`;
      }

      card.innerHTML = `
        <div class="card-thumbnail">${thumbnailHtml}</div>
        <div class="card-body">
          <h3 class="card-title">${title}</h3>
          <div class="card-info">${pkg.durationMinutes || 60}${t('duration')}</div>
        </div>
      `;

      if (hasVideo) {
        const video = card.querySelector('video');
        video.addEventListener('error', () => {
          card.querySelector('.card-thumbnail').innerHTML = `<div class="card-placeholder" data-genre="${primaryGenre}">${emoji}</div>${playIconHtml}`;
        });
        card.addEventListener('mouseenter', () => video.play().catch(() => {}));
        card.addEventListener('mouseleave', () => { video.pause(); video.currentTime = 0; });
      }

      card.addEventListener('click', () => openModal(pkg.id));

      return card;
    }

    async function resolveAllThumbnails(packages) {
      return Promise.all(packages.map(async pkg => ({
        ...pkg,
        resolvedThumbnailUrl: await resolveThumbnail(pkg),
        resolvedPreviewUrl: await resolvePreview(pkg)
      })));
    }

    // ÂàùÊúüÂåñ
    async function init() {
      loadSavedTheme();
      setupEventListeners();
      initializeFirebase();
      state.isLoading = true;
      showLoading();

      try {
        const packages = await loadPackages();
        state.packages = await resolveAllThumbnails(packages);
        state.filteredPackages = [...state.packages];
        state.isLoading = false;
        renderCards(state.filteredPackages);
      } catch (e) {
        state.isLoading = false;
        if (state.packages.length === 0) {
          state.packages = LOCAL_PACKAGES;
          state.filteredPackages = [...state.packages];
          renderCards(state.filteredPackages);
        }
      }
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
